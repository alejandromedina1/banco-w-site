import "./challengeStatus.scss";

class ChallengeStatus extends HTMLElement {
    constructor() {
        super();

        this.medal;
        this.text;
        this.points;
        this.progress;
        this.link;
    }

    static get observedAttributes() {
        return [
            "medal",
            "text",
            "points",
            "progress",
            "link"
        ]
    }

    attributeChangedCallback(nameAtr, oldValue, newValue) {

        switch (nameAtr) {

            case "medal":

                this.medal = newValue

                break;

            case "text":

                this.text = newValue

                break;

            case "points":

                this.points = newValue

                break;

            case "progress":

                this.progress = newValue

                break;

            case "link":

                this.link = newValue

                break;
        }

    }


    connectedCallback() {
        this.render()
    }

    render() {

        const medalType = this.medal;

        let svg_medal
        switch (medalType) {
            case 'bronce':
                svg_medal = `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="39" viewBox="0 0 45 58" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.75 56.1875V7.25C0.75 5.32718 1.51384 3.48311 2.87348 2.12348C4.23311 0.763837 6.07718 0 8 0L37 0C38.9228 0 40.7669 0.763837 42.1265 2.12348C43.4862 3.48311 44.25 5.32718 44.25 7.25V56.1875C44.2502 56.5022 44.1685 56.8116 44.0128 57.0852C43.8572 57.3588 43.633 57.5871 43.3623 57.7477C43.0916 57.9082 42.7837 57.9956 42.469 58.0011C42.1543 58.0065 41.8436 57.93 41.5675 57.7789L22.5 47.3751L3.4325 57.7789C3.15638 57.93 2.84568 58.0065 2.53098 58.0011C2.21628 57.9956 1.90843 57.9082 1.63773 57.7477C1.36704 57.5871 1.14282 57.3588 0.987164 57.0852C0.831506 56.8116 0.74977 56.5022 0.75 56.1875ZM23.08 14.8625C23.027 14.7538 22.9445 14.6622 22.842 14.5981C22.7394 14.534 22.6209 14.5 22.5 14.5C22.3791 14.5 22.2606 14.534 22.158 14.5981C22.0555 14.6622 21.973 14.7538 21.92 14.8625L19.6217 19.5206C19.5757 19.6149 19.5075 19.6964 19.4228 19.7583C19.3382 19.8202 19.2397 19.8606 19.136 19.8759L13.9885 20.6226C13.87 20.6406 13.7589 20.6912 13.6675 20.7688C13.5762 20.8465 13.5083 20.948 13.4714 21.062C13.4345 21.176 13.4301 21.2981 13.4587 21.4145C13.4873 21.5309 13.5477 21.637 13.6333 21.721L17.3525 25.3496C17.5047 25.4983 17.5736 25.7121 17.5374 25.9224L16.6637 31.0481C16.644 31.1665 16.6577 31.288 16.7033 31.399C16.7488 31.51 16.8244 31.6061 16.9216 31.6765C17.0187 31.7469 17.1336 31.7889 17.2532 31.7976C17.3729 31.8064 17.4926 31.7816 17.599 31.726L22.2028 29.3045C22.295 29.2562 22.3977 29.231 22.5018 29.231C22.606 29.231 22.7086 29.2562 22.8009 29.3045L27.4046 31.726C27.5109 31.7806 27.6302 31.8046 27.7492 31.7954C27.8683 31.7861 27.9825 31.744 28.0791 31.6738C28.1756 31.6035 28.2508 31.5078 28.2962 31.3974C28.3416 31.2869 28.3555 31.166 28.3362 31.0481L27.459 25.9188C27.4405 25.8157 27.4473 25.7098 27.4789 25.61C27.5105 25.5102 27.5659 25.4196 27.6403 25.346L31.3668 21.7174C31.4523 21.6334 31.5127 21.5273 31.5413 21.4109C31.5699 21.2945 31.5655 21.1724 31.5286 21.0584C31.4917 20.9443 31.4238 20.8428 31.3325 20.7652C31.2412 20.6876 31.13 20.637 31.0115 20.619L25.864 19.8722C25.7603 19.857 25.6618 19.8166 25.5772 19.7547C25.4925 19.6928 25.4243 19.6112 25.3782 19.517L23.08 14.8625Z" fill="#A57866"/>
      </svg>`;
                break;
            case 'plata':
                svg_medal = `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="39" viewBox="0 0 59 58" fill="none">
        <g clip-path="url(#clip0_388_33839)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M7.75 56.1875V7.25C7.75 5.32718 8.51384 3.48311 9.87348 2.12348C11.2331 0.763837 13.0772 0 15 0L44 0C45.9228 0 47.7669 0.763837 49.1265 2.12348C50.4862 3.48311 51.25 5.32718 51.25 7.25V56.1875C51.2502 56.5022 51.1685 56.8116 51.0128 57.0852C50.8572 57.3588 50.633 57.5871 50.3623 57.7477C50.0916 57.9082 49.7837 57.9956 49.469 58.0011C49.1543 58.0065 48.8436 57.93 48.5675 57.7789L29.5 47.3751L10.4325 57.7789C10.1564 57.93 9.84568 58.0065 9.53098 58.0011C9.21628 57.9956 8.90843 57.9082 8.63773 57.7477C8.36704 57.5871 8.14282 57.3588 7.98716 57.0852C7.83151 56.8116 7.74977 56.5022 7.75 56.1875ZM30.08 14.8625C30.027 14.7538 29.9445 14.6622 29.842 14.5981C29.7394 14.534 29.6209 14.5 29.5 14.5C29.3791 14.5 29.2606 14.534 29.158 14.5981C29.0555 14.6622 28.973 14.7538 28.92 14.8625L26.6217 19.5206C26.5757 19.6149 26.5075 19.6964 26.4228 19.7583C26.3382 19.8202 26.2397 19.8606 26.136 19.8759L20.9885 20.6226C20.87 20.6406 20.7589 20.6912 20.6675 20.7688C20.5762 20.8465 20.5083 20.948 20.4714 21.062C20.4345 21.176 20.4301 21.2981 20.4587 21.4145C20.4873 21.5309 20.5477 21.637 20.6333 21.721L24.3525 25.3496C24.5047 25.4983 24.5736 25.7121 24.5374 25.9224L23.6637 31.0481C23.644 31.1665 23.6577 31.288 23.7033 31.399C23.7488 31.51 23.8244 31.6061 23.9216 31.6765C24.0187 31.7469 24.1336 31.7889 24.2532 31.7976C24.3729 31.8064 24.4926 31.7816 24.599 31.726L29.2028 29.3045C29.295 29.2562 29.3977 29.231 29.5018 29.231C29.606 29.231 29.7086 29.2562 29.8009 29.3045L34.4046 31.726C34.5109 31.7806 34.6302 31.8046 34.7492 31.7954C34.8683 31.7861 34.9825 31.744 35.0791 31.6738C35.1756 31.6035 35.2508 31.5078 35.2962 31.3974C35.3416 31.2869 35.3555 31.166 35.3362 31.0481L34.459 25.9188C34.4405 25.8157 34.4473 25.7098 34.4789 25.61C34.5105 25.5102 34.5659 25.4196 34.6403 25.346L38.3668 21.7174C38.4523 21.6334 38.5127 21.5273 38.5413 21.4109C38.5699 21.2945 38.5655 21.1724 38.5286 21.0584C38.4917 20.9443 38.4238 20.8428 38.3325 20.7652C38.2412 20.6876 38.13 20.637 38.0115 20.619L32.864 19.8722C32.7603 19.857 32.6618 19.8166 32.5772 19.7547C32.4925 19.6928 32.4243 19.6112 32.3782 19.517L30.08 14.8625Z" fill="#DADADA"/>
        </g>
        <defs>
          <clipPath id="clip0_388_33839">
            <rect width="58" height="58" fill="white" transform="translate(0.5)"/>
          </clipPath>
        </defs>
      </svg>`;
                break;
            case 'hierro':
                svg_medal = `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="39" viewBox="0 0 59 58" fill="none">
        <g clip-path="url(#clip0_388_33831)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M7.75 56.1875V7.25C7.75 5.32718 8.51384 3.48311 9.87348 2.12348C11.2331 0.763837 13.0772 0 15 0L44 0C45.9228 0 47.7669 0.763837 49.1265 2.12348C50.4862 3.48311 51.25 5.32718 51.25 7.25V56.1875C51.2502 56.5022 51.1685 56.8116 51.0128 57.0852C50.8572 57.3588 50.633 57.5871 50.3623 57.7477C50.0916 57.9082 49.7837 57.9956 49.469 58.0011C49.1543 58.0065 48.8436 57.93 48.5675 57.7789L29.5 47.3751L10.4325 57.7789C10.1564 57.93 9.84568 58.0065 9.53098 58.0011C9.21628 57.9956 8.90843 57.9082 8.63773 57.7477C8.36704 57.5871 8.14282 57.3588 7.98716 57.0852C7.83151 56.8116 7.74977 56.5022 7.75 56.1875ZM30.08 14.8625C30.027 14.7538 29.9445 14.6622 29.842 14.5981C29.7394 14.534 29.6209 14.5 29.5 14.5C29.3791 14.5 29.2606 14.534 29.158 14.5981C29.0555 14.6622 28.973 14.7538 28.92 14.8625L26.6217 19.5206C26.5757 19.6149 26.5075 19.6964 26.4228 19.7583C26.3382 19.8202 26.2397 19.8606 26.136 19.8759L20.9885 20.6226C20.87 20.6406 20.7589 20.6912 20.6675 20.7688C20.5762 20.8465 20.5083 20.948 20.4714 21.062C20.4345 21.176 20.4301 21.2981 20.4587 21.4145C20.4873 21.5309 20.5477 21.637 20.6333 21.721L24.3525 25.3496C24.5047 25.4983 24.5736 25.7121 24.5374 25.9224L23.6637 31.0481C23.644 31.1665 23.6577 31.288 23.7033 31.399C23.7488 31.51 23.8244 31.6061 23.9216 31.6765C24.0187 31.7469 24.1336 31.7889 24.2532 31.7976C24.3729 31.8064 24.4926 31.7816 24.599 31.726L29.2028 29.3045C29.295 29.2562 29.3977 29.231 29.5018 29.231C29.606 29.231 29.7086 29.2562 29.8009 29.3045L34.4046 31.726C34.5109 31.7806 34.6302 31.8046 34.7492 31.7954C34.8683 31.7861 34.9825 31.744 35.0791 31.6738C35.1756 31.6035 35.2508 31.5078 35.2962 31.3974C35.3416 31.2869 35.3555 31.166 35.3362 31.0481L34.459 25.9188C34.4405 25.8157 34.4473 25.7098 34.4789 25.61C34.5105 25.5102 34.5659 25.4196 34.6403 25.346L38.3668 21.7174C38.4523 21.6334 38.5127 21.5273 38.5413 21.4109C38.5699 21.2945 38.5655 21.1724 38.5286 21.0584C38.4917 20.9443 38.4238 20.8428 38.3325 20.7652C38.2412 20.6876 38.13 20.637 38.0115 20.619L32.864 19.8722C32.7603 19.857 32.6618 19.8166 32.5772 19.7547C32.4925 19.6928 32.4243 19.6112 32.3782 19.517L30.08 14.8625Z" fill="#8F8F8F"/>
        </g>
        <defs>
          <clipPath id="clip0_388_33831">
            <rect width="58" height="58" fill="white" transform="translate(0.5)"/>
          </clipPath>
        </defs>
      </svg>`;
                break;
            default:
                break;
        }

        const progressNumber = this.progress;
        let svg_completed;

        if (progressNumber == 100) {
            svg_completed = `<svg xmlns="http://www.w3.org/2000/svg" width="35" height="36" viewBox="0 0 35 36" fill="none">
        <g clip-path="url(#clip0_389_33093)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4.375 34.0703V4.53906C4.375 3.37874 4.83594 2.26594 5.65641 1.44547C6.47688 0.624999 7.58968 0.164063 8.75 0.164063L26.25 0.164062C27.4103 0.164063 28.5231 0.624999 29.3436 1.44547C30.1641 2.26594 30.625 3.37874 30.625 4.53906V34.0703C30.6251 34.2602 30.5758 34.4469 30.4819 34.612C30.388 34.7771 30.2527 34.9149 30.0893 35.0118C29.9259 35.1087 29.7402 35.1614 29.5503 35.1647C29.3604 35.168 29.1729 35.1218 29.0063 35.0306L17.5 28.7525L5.99375 35.0306C5.82713 35.1218 5.63963 35.168 5.44973 35.1647C5.25982 35.1614 5.07405 35.1087 4.9107 35.0118C4.74735 34.9149 4.61205 34.7771 4.51812 34.612C4.42418 34.4469 4.37486 34.2602 4.375 34.0703ZM17.85 9.13281C17.818 9.06721 17.7683 9.01193 17.7064 8.97325C17.6445 8.93457 17.573 8.91406 17.5 8.91406C17.427 8.91406 17.3555 8.93457 17.2936 8.97325C17.2317 9.01193 17.182 9.06721 17.15 9.13281L15.7631 11.9438C15.7354 12.0006 15.6942 12.0498 15.6431 12.0872C15.592 12.1246 15.5326 12.1489 15.47 12.1581L12.3638 12.6088C12.2922 12.6196 12.2252 12.6502 12.1701 12.697C12.1149 12.7438 12.0739 12.8051 12.0517 12.8739C12.0294 12.9427 12.0268 13.0164 12.044 13.0866C12.0613 13.1568 12.0978 13.2209 12.1494 13.2716L14.3938 15.4613C14.4856 15.5509 14.5272 15.68 14.5053 15.8069L13.9781 18.9C13.9662 18.9714 13.9745 19.0447 14.002 19.1117C14.0295 19.1787 14.0751 19.2367 14.1337 19.2792C14.1923 19.3217 14.2616 19.347 14.3339 19.3523C14.4061 19.3576 14.4783 19.3426 14.5425 19.3091L17.3206 17.8478C17.3763 17.8187 17.4382 17.8035 17.5011 17.8035C17.5639 17.8035 17.6259 17.8187 17.6816 17.8478L20.4597 19.3091C20.5238 19.342 20.5958 19.3565 20.6676 19.3509C20.7395 19.3453 20.8084 19.32 20.8667 19.2775C20.9249 19.2351 20.9703 19.1774 20.9977 19.1107C21.0251 19.0441 21.0335 18.9711 21.0219 18.9L20.4925 15.8047C20.4813 15.7425 20.4855 15.6786 20.5045 15.6184C20.5236 15.5582 20.557 15.5035 20.6019 15.4591L22.8506 13.2694C22.9022 13.2187 22.9387 13.1547 22.956 13.0844C22.9732 13.0142 22.9706 12.9405 22.9483 12.8717C22.9261 12.8029 22.8851 12.7416 22.83 12.6948C22.7748 12.648 22.7078 12.6174 22.6362 12.6066L19.53 12.1559C19.4674 12.1467 19.408 12.1224 19.3569 12.085C19.3058 12.0477 19.2646 11.9984 19.2369 11.9416L17.85 9.13281Z" fill="#FF8833"/>
        </g>
        <defs>
          <clipPath id="clip0_389_33093">
            <rect width="35" height="35" fill="white" transform="translate(0 0.164062)"/>
          </clipPath>
        </defs>
      </svg>`
        } else {
            svg_completed = `<svg xmlns="http://www.w3.org/2000/svg" width="35" height="36" viewBox="0 0 35 36" fill="none">
        <g clip-path="url(#clip0_389_33112)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4.375 34.2344V4.70312C4.375 3.5428 4.83594 2.43 5.65641 1.60953C6.47688 0.789061 7.58968 0.328125 8.75 0.328125L26.25 0.328125C27.4103 0.328125 28.5231 0.789061 29.3436 1.60953C30.1641 2.43 30.625 3.5428 30.625 4.70312V34.2344C30.6251 34.4243 30.5758 34.611 30.4819 34.7761C30.388 34.9412 30.2527 35.0789 30.0893 35.1758C29.9259 35.2728 29.7402 35.3255 29.5503 35.3288C29.3604 35.3321 29.1729 35.2859 29.0063 35.1947L17.5 28.9166L5.99375 35.1947C5.82713 35.2859 5.63963 35.3321 5.44973 35.3288C5.25982 35.3255 5.07405 35.2728 4.9107 35.1758C4.74735 35.0789 4.61205 34.9412 4.51812 34.7761C4.42418 34.611 4.37486 34.4243 4.375 34.2344ZM17.85 9.29688C17.818 9.23128 17.7683 9.17599 17.7064 9.13731C17.6445 9.09863 17.573 9.07812 17.5 9.07812C17.427 9.07812 17.3555 9.09863 17.2936 9.13731C17.2317 9.17599 17.182 9.23128 17.15 9.29688L15.7631 12.1078C15.7354 12.1647 15.6942 12.2139 15.6431 12.2513C15.592 12.2886 15.5326 12.313 15.47 12.3222L12.3638 12.7728C12.2922 12.7837 12.2252 12.8142 12.1701 12.861C12.1149 12.9079 12.0739 12.9691 12.0517 13.038C12.0294 13.1068 12.0268 13.1804 12.044 13.2507C12.0613 13.3209 12.0978 13.385 12.1494 13.4356L14.3938 15.6253C14.4856 15.715 14.5272 15.8441 14.5053 15.9709L13.9781 19.0641C13.9662 19.1355 13.9745 19.2088 14.002 19.2758C14.0295 19.3428 14.0751 19.4008 14.1337 19.4433C14.1923 19.4858 14.2616 19.5111 14.3339 19.5163C14.4061 19.5216 14.4783 19.5066 14.5425 19.4731L17.3206 18.0119C17.3763 17.9827 17.4382 17.9675 17.5011 17.9675C17.5639 17.9675 17.6259 17.9827 17.6816 18.0119L20.4597 19.4731C20.5238 19.5061 20.5958 19.5205 20.6676 19.515C20.7395 19.5094 20.8084 19.484 20.8667 19.4416C20.9249 19.3992 20.9703 19.3415 20.9977 19.2748C21.0251 19.2081 21.0335 19.1352 21.0219 19.0641L20.4925 15.9688C20.4813 15.9066 20.4855 15.8426 20.5045 15.7824C20.5236 15.7222 20.557 15.6675 20.6019 15.6231L22.8506 13.4334C22.9022 13.3828 22.9387 13.3187 22.956 13.2485C22.9732 13.1782 22.9706 13.1046 22.9483 13.0358C22.9261 12.967 22.8851 12.9057 22.83 12.8589C22.7748 12.812 22.7078 12.7815 22.6362 12.7706L19.53 12.32C19.4674 12.3108 19.408 12.2864 19.3569 12.2491C19.3058 12.2117 19.2646 12.1625 19.2369 12.1056L17.85 9.29688Z" fill="#DADADA"/>
        </g>
        <defs>
          <clipPath id="clip0_389_33112">
            <rect width="35" height="35" fill="white" transform="translate(0 0.328125)"/>
          </clipPath>
        </defs>
      </svg>`
        }


        this.innerHTML = `
    <link rel="stylesheet" href="../ChallengeStatus/challengeStatus.scss">
    
    <div class="challenges-card">
        <div class="challenges-card-container">
            <div class="challenges-card-top">
                <figure>${svg_medal}</figure>
                <div class="challenges-card-top-text">
                    <p class="challenges-card-top-text-1">${this.text}</p>
                    <p class="challenges-card-top-text-2">${this.points}</p>
                </div>
            </div>
            <div class="challenges-card-bottom">
                <div class="challenges-card-bottom-progress">

                    <div class="challenges-card-bottom-progress-bar">
                        <div class="challenges-card-bottom-progress-bar-filled" style="height:100%;width:${this.progress}%"></div>
                    </div>
                    <span>${this.progress}%</span>   
                
                </div> 
                <div>
                    
                    <span class="challenges-card-bottom-medal">${svg_completed}</span>    
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.18251 2.20912C6.24431 2.14717 6.31773 2.09801 6.39855 2.06447C6.47938 2.03094 6.56603 2.01367 6.65353 2.01367C6.74104 2.01367 6.82769 2.03094 6.90851 2.06447C6.98934 2.09801 7.06275 2.14717 7.12455 2.20912L15.108 10.1925C15.1699 10.2543 15.2191 10.3277 15.2526 10.4086C15.2861 10.4894 15.3034 10.576 15.3034 10.6635C15.3034 10.751 15.2861 10.8377 15.2526 10.9185C15.2191 10.9993 15.1699 11.0728 15.108 11.1346L7.12455 19.118C6.99963 19.2429 6.8302 19.3131 6.65353 19.3131C6.47687 19.3131 6.30743 19.2429 6.18251 19.118C6.05759 18.993 5.98741 18.8236 5.98741 18.6469C5.98741 18.4703 6.05759 18.3008 6.18251 18.1759L13.6962 10.6635L6.18251 3.15117C6.12056 3.08937 6.0714 3.01595 6.03786 2.93513C6.00432 2.8543 5.98706 2.76765 5.98706 2.68014C5.98706 2.59264 6.00432 2.50599 6.03786 2.42516C6.0714 2.34434 6.12056 2.27092 6.18251 2.20912Z" fill="#27262C"/>
                    </svg>
                    </div> 
                </div>
        </div>
    </div>
    `
    }

}

customElements.define('challenge-status', ChallengeStatus)