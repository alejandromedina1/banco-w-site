import "./lastPost.scss"

class LastPost extends HTMLElement {
    constructor() {
        super();

            this.profile_picture;
            this.name;
            this.date;
            this.spot;
            this.stars;
            this.text;
            this.likes;
            this.comments;
            this.reactions;
            this.link;
    }

    static get observedAttributes() {
        return [
            "profile_picture",
            "name",
            "date",
            "spot",
            "stars",
            "text",
            "likes",
            "comments",
            "reactions",
            "link"
        ]
    }

    attributeChangedCallback(nameAtr, oldValue, newValue) {

        switch (nameAtr) {

            case "profile_picture":

                this.profile_picture = newValue

                break;

            case "name":

                this.name = newValue

                break;

            case "date":

                this.date = newValue

                break;
                
            case "spot":

                this.spot = newValue

            break;
            

            case "stars":

                this.stars = newValue

                break;

            case "text":

                this.text = newValue

                break;

            case "likes":

                this.likes = newValue

                break;

            case "comments":

                this.comments = newValue

                break;

            case "reactions":

                this.reactions = newValue

                break;

            case "link":

                this.link = newValue

                break;
        }

    }


    connectedCallback() {
        this.render()
    }

    render() {

        const maxStars = 5;
        const coloredStars = Math.min(this.stars, maxStars); 
        const blankStars = maxStars - coloredStars; 
      
        const coloredStarsSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 11 11" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6127 3.65484C10.6951 3.71903 10.7571 3.80574 10.7912 3.90447C10.8174 4.00317 10.8151 4.1073 10.7846 4.20475C10.754 4.3022 10.6964 4.38897 10.6185 4.45499L8.38937 6.61391L8.9291 9.67958C8.94837 9.78077 8.93828 9.88536 8.90002 9.981C8.86177 10.0766 8.79695 10.1593 8.71321 10.2193C8.6206 10.2864 8.5091 10.3223 8.39477 10.3219C8.3078 10.3221 8.22224 10.2998 8.14649 10.2571L5.39387 8.81062L2.63045 10.2517C2.54181 10.2987 2.44182 10.3201 2.34172 10.3134C2.24161 10.3067 2.14535 10.2723 2.06373 10.2139C1.97999 10.1539 1.91517 10.0712 1.87691 9.9756C1.83866 9.87996 1.82857 9.77537 1.84784 9.67418L2.38757 6.60852L0.158482 4.4496C0.0891043 4.38036 0.0398884 4.29354 0.0161166 4.19846C-0.0076552 4.10337 -0.00508551 4.0036 0.0235499 3.90987C0.0548326 3.81394 0.112377 3.72871 0.189652 3.66383C0.266927 3.59896 0.36084 3.55705 0.460731 3.54285L3.5318 3.08947L4.90811 0.304467C4.95231 0.213215 5.02131 0.136256 5.10722 0.0824079C5.19313 0.0285598 5.29247 0 5.39387 0C5.49526 0 5.5946 0.0285598 5.68051 0.0824079C5.76642 0.136256 5.83543 0.213215 5.87962 0.304467L7.25594 3.09487L10.327 3.54285C10.4311 3.55175 10.5303 3.59066 10.6127 3.65484Z" fill="#00B1BB"/>
      </svg>`;
        
        const blankStarsSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 14 14" fill="none">
        <path d="M12.6891 6.04119C12.655 5.94246 12.593 5.85575 12.5106 5.79156C12.4282 5.72738 12.329 5.68847 12.2249 5.67957L9.15385 5.23159L7.77754 2.44119C7.73334 2.34993 7.66434 2.27297 7.57843 2.21913C7.49252 2.16528 7.39318 2.13672 7.29178 2.13672C7.19039 2.13672 7.09105 2.16528 7.00514 2.21913C6.91923 2.27297 6.85022 2.34993 6.80603 2.44119L5.42971 5.22619L2.35865 5.67957C2.25876 5.69377 2.16484 5.73568 2.08757 5.80055C2.01029 5.86543 1.95275 5.95066 1.92147 6.04658C1.89283 6.14032 1.89026 6.24009 1.91403 6.33517C1.93781 6.43026 1.98702 6.51708 2.0564 6.58631L4.28549 8.74524L3.74576 11.8109C3.72649 11.9121 3.73658 12.0167 3.77483 12.1123C3.81309 12.208 3.87791 12.2906 3.96165 12.3506C4.04326 12.409 4.13953 12.4434 4.23963 12.4501C4.33974 12.4568 4.43972 12.4354 4.52836 12.3884L7.29178 10.9473L10.0444 12.3938C10.1202 12.4365 10.2057 12.4589 10.2927 12.4586C10.407 12.459 10.5185 12.4231 10.6111 12.356C10.6949 12.296 10.7597 12.2134 10.7979 12.1177C10.8362 12.0221 10.8463 11.9175 10.827 11.8163L10.2873 8.75063L12.5164 6.59171C12.5943 6.52569 12.6519 6.43892 12.6825 6.34147C12.713 6.24401 12.7153 6.13989 12.6891 6.04119ZM9.36975 8.20011C9.30645 8.26133 9.25909 8.33711 9.23181 8.42084C9.20453 8.50457 9.19815 8.59371 9.21322 8.68047L9.60183 10.9419L7.57244 9.86248C7.49435 9.8209 7.40724 9.79915 7.31877 9.79915C7.2303 9.79915 7.14319 9.8209 7.0651 9.86248L5.03571 10.9419L5.42432 8.68047C5.43939 8.59371 5.43301 8.50457 5.40573 8.42084C5.37845 8.33711 5.33109 8.26133 5.2678 8.20011L3.6486 6.58092L5.92087 6.25168C6.0083 6.23952 6.09142 6.2061 6.16294 6.15434C6.23445 6.10259 6.29218 6.03408 6.33106 5.95483L7.29178 3.89846L8.30648 5.96023C8.34536 6.03948 8.40309 6.10799 8.4746 6.15974C8.54612 6.21149 8.62924 6.24492 8.71667 6.25708L10.9889 6.58631L9.36975 8.20011Z" fill="#00B1BB"/>
      </svg>`
      
        const starsHTML = coloredStarsSVG.repeat(coloredStars) + blankStarsSVG.repeat(blankStars);

        this.innerHTML = `
    <link rel="stylesheet" href="../LastPost/lastPost.scss">
    
    <div class="post-card">
        <div class="post-card-user">
        <div class="post-card-user-left">
        <figure class="post-card-user-picture"><img src="${this.profile_picture}" alt="Foto de perfil del usuario"></figure>
        <div class="post-card-user-info">
            <span class="post-card-user-info-name">${this.name}</span>
            <div class="post-card-user-info-container">
            <span class="post-card-user-info-date">${this.date}</span>
            <span class="separator">|</span>
            <span class="post-card-user-info-spot">${this.spot}</span>
            <span class="separator">|</span>
            <span class="post-card-user-info-stars">${starsHTML}</span>
            </div>
        </div>
        </div>
        <svg class="post-card-user-icon" xmlns="http://www.w3.org/2000/svg" width="15" height="14" viewBox="0 0 15 14" fill="none">
         <path d="M7.46833 5.73242C7.25291 5.73242 7.04233 5.7963 6.86321 5.91598C6.68409 6.03566 6.54449 6.20577 6.46205 6.40479C6.37962 6.60382 6.35805 6.82281 6.40007 7.03409C6.4421 7.24538 6.54583 7.43945 6.69816 7.59177C6.85048 7.7441 7.04456 7.84783 7.25584 7.88986C7.46712 7.93189 7.68612 7.91032 7.88514 7.82788C8.08416 7.74544 8.25427 7.60584 8.37395 7.42672C8.49363 7.24761 8.55751 7.03703 8.55751 6.82161C8.55751 6.53274 8.44276 6.2557 8.2385 6.05144C8.03423 5.84718 7.7572 5.73242 7.46833 5.73242ZM3.65619 5.73242C3.44077 5.73242 3.23018 5.7963 3.05107 5.91598C2.87195 6.03566 2.73235 6.20577 2.64991 6.40479C2.56747 6.60382 2.5459 6.82281 2.58793 7.03409C2.62996 7.24538 2.73369 7.43945 2.88602 7.59177C3.03834 7.7441 3.23242 7.84783 3.4437 7.88986C3.65498 7.93189 3.87398 7.91032 4.073 7.82788C4.27202 7.74544 4.44213 7.60584 4.56181 7.42672C4.68149 7.24761 4.74537 7.03703 4.74537 6.82161C4.74537 6.53274 4.63062 6.2557 4.42635 6.05144C4.22209 5.84718 3.94505 5.73242 3.65619 5.73242ZM11.2805 5.73242C11.065 5.73242 10.8545 5.7963 10.6754 5.91598C10.4962 6.03566 10.3566 6.20577 10.2742 6.40479C10.1918 6.60382 10.1702 6.82281 10.2122 7.03409C10.2542 7.24538 10.358 7.43945 10.5103 7.59177C10.6626 7.7441 10.8567 7.84783 11.068 7.88986C11.2793 7.93189 11.4983 7.91032 11.6973 7.82788C11.8963 7.74544 12.0664 7.60584 12.1861 7.42672C12.3058 7.24761 12.3697 7.03703 12.3697 6.82161C12.3697 6.53274 12.2549 6.2557 12.0506 6.05144C11.8464 5.84718 11.5693 5.73242 11.2805 5.73242Z" fill="#00B1BB"/>
        </svg>

        </div>

        <p class="post-card-user-comment">${this.text}</p>

        <div class="interactions-container">

        <div class="interactions">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M11.5649 3.33316C10.9867 2.75481 10.2202 2.40318 9.40465 2.34221C8.58913 2.28125 7.77881 2.515 7.12106 3.00096C6.42815 2.48558 5.5657 2.25188 4.70738 2.34693C3.84907 2.44197 3.05864 2.8587 2.49528 3.51319C1.93192 4.16769 1.63747 5.01133 1.67122 5.87423C1.70497 6.73714 2.06443 7.5552 2.67719 8.16369L6.7344 12.2209C6.78503 12.2719 6.84526 12.3125 6.91162 12.3401C6.97798 12.3678 7.04917 12.382 7.12106 12.382C7.19295 12.382 7.26413 12.3678 7.3305 12.3401C7.39686 12.3125 7.45709 12.2719 7.50772 12.2209L11.5649 8.16369C11.8822 7.84659 12.134 7.47007 12.3057 7.05564C12.4774 6.64122 12.5658 6.19702 12.5658 5.74843C12.5658 5.29983 12.4774 4.85563 12.3057 4.44121C12.134 4.02678 11.8822 3.65026 11.5649 3.33316ZM10.7971 7.39582L7.12106 11.0664L3.44506 7.39582C3.12113 7.07053 2.90046 6.65683 2.81074 6.20661C2.72102 5.75639 2.76625 5.28971 2.94075 4.86509C3.11524 4.44048 3.41124 4.07685 3.79161 3.81982C4.17198 3.56279 4.61978 3.4238 5.07884 3.4203C5.69211 3.4218 6.27972 3.66663 6.71262 4.10104C6.76324 4.15208 6.82347 4.19259 6.88984 4.22024C6.9562 4.24789 7.02738 4.26212 7.09928 4.26212C7.17117 4.26212 7.24235 4.24789 7.30871 4.22024C7.37508 4.19259 7.43531 4.15208 7.48594 4.10104C7.93159 3.71486 8.50731 3.51241 9.09659 3.53467C9.68586 3.55694 10.2447 3.80224 10.6599 4.22095C11.0752 4.63965 11.3158 5.20048 11.3332 5.78992C11.3506 6.37936 11.1433 6.95338 10.7535 7.39582H10.7971Z" fill="#00B1BB"/>
        </svg>
        <span>${this.likes} me gusta</span>
        </div>
        
        <div class="interactions">
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 12 13" fill="none">
        <path d="M3.99367 6.31319C3.89494 6.31319 3.79842 6.34247 3.71632 6.39733C3.63423 6.45218 3.57025 6.53015 3.53246 6.62136C3.49468 6.71258 3.48479 6.81296 3.50405 6.90979C3.52332 7.00663 3.57086 7.09558 3.64068 7.1654C3.71049 7.23521 3.79944 7.28276 3.89628 7.30202C3.99312 7.32128 4.09349 7.3114 4.18471 7.27361C4.27593 7.23583 4.35389 7.17184 4.40875 7.08975C4.4636 7.00765 4.49288 6.91114 4.49288 6.8124C4.49288 6.68 4.44028 6.55303 4.34666 6.45941C4.25304 6.36579 4.12607 6.31319 3.99367 6.31319ZM5.99051 6.31319C5.89177 6.31319 5.79526 6.34247 5.71316 6.39733C5.63107 6.45218 5.56708 6.53015 5.5293 6.62136C5.49151 6.71258 5.48163 6.81296 5.50089 6.90979C5.52015 7.00663 5.5677 7.09558 5.63751 7.1654C5.70733 7.23521 5.79628 7.28276 5.89312 7.30202C5.98995 7.32128 6.09033 7.3114 6.18155 7.27361C6.27276 7.23583 6.35073 7.17184 6.40558 7.08975C6.46044 7.00765 6.48972 6.91114 6.48972 6.8124C6.48972 6.68 6.43712 6.55303 6.3435 6.45941C6.24988 6.36579 6.12291 6.31319 5.99051 6.31319ZM7.98734 6.31319C7.88861 6.31319 7.79209 6.34247 7.71 6.39733C7.6279 6.45218 7.56392 6.53015 7.52613 6.62136C7.48835 6.71258 7.47846 6.81296 7.49773 6.90979C7.51699 7.00663 7.56453 7.09558 7.63435 7.1654C7.70416 7.23521 7.79312 7.28276 7.88995 7.30202C7.98679 7.32128 8.08716 7.3114 8.17838 7.27361C8.2696 7.23583 8.34757 7.17184 8.40242 7.08975C8.45727 7.00765 8.48655 6.91114 8.48655 6.8124C8.48655 6.68 8.43396 6.55303 8.34034 6.45941C8.24672 6.36579 8.11974 6.31319 7.98734 6.31319ZM5.99051 1.82031C5.33494 1.82031 4.68578 1.94944 4.08012 2.20031C3.47445 2.45119 2.92412 2.8189 2.46057 3.28246C1.52437 4.21866 0.998415 5.48842 0.998415 6.8124C0.994051 7.96514 1.39319 9.08307 2.12663 9.9724L1.12821 10.9708C1.05894 11.041 1.01202 11.1302 0.993359 11.227C0.974702 11.3238 0.985147 11.424 1.02338 11.515C1.06484 11.6048 1.13206 11.6803 1.21649 11.7318C1.30093 11.7834 1.39878 11.8087 1.49762 11.8045H5.99051C7.31449 11.8045 8.58425 11.2785 9.52045 10.3423C10.4566 9.40615 10.9826 8.13639 10.9826 6.8124C10.9826 5.48842 10.4566 4.21866 9.52045 3.28246C8.58425 2.34626 7.31449 1.82031 5.99051 1.82031ZM5.99051 10.8061H2.70072L3.16498 10.3418C3.21215 10.2956 3.24968 10.2404 3.27539 10.1796C3.30109 10.1188 3.31447 10.0534 3.31475 9.98737C3.31287 9.8557 3.25904 9.7301 3.16498 9.63793C2.51131 8.98498 2.10425 8.12559 2.01315 7.20618C1.92206 6.28676 2.15256 5.3642 2.66539 4.59568C3.17822 3.82715 3.94165 3.26021 4.82561 2.99144C5.70957 2.72268 6.65938 2.76871 7.5132 3.12171C8.36703 3.4747 9.07205 4.11282 9.50815 4.92734C9.94425 5.74185 10.0845 6.68238 9.90487 7.58868C9.72528 8.49497 9.23702 9.31097 8.52326 9.89764C7.80951 10.4843 6.91442 10.8053 5.99051 10.8061Z" fill="#00B1BB"/>
        </svg>
        <span>${this.comments} comentarios</span>
        </div>

        <div class="interactions">
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
        <path d="M7.16867 7.10337C6.83495 7.37243 6.4192 7.51916 5.99053 7.51916C5.56187 7.51916 5.14611 7.37243 4.8124 7.10337C4.71045 7.01864 4.57902 6.97787 4.44702 6.99004C4.31501 7.00221 4.19325 7.06632 4.10851 7.16827C4.02378 7.27022 3.98301 7.40165 3.99518 7.53365C4.00735 7.66566 4.07146 7.78742 4.17341 7.87216C4.68327 8.29778 5.32637 8.53093 5.99053 8.53093C6.6547 8.53093 7.29779 8.29778 7.80765 7.87216C7.9096 7.78742 7.97371 7.66566 7.98588 7.53365C7.99805 7.40165 7.95729 7.27022 7.87255 7.16827C7.8306 7.11779 7.77911 7.07607 7.72103 7.04549C7.66295 7.01491 7.59941 6.99607 7.53405 6.99004C7.40205 6.97787 7.27061 7.01864 7.16867 7.10337ZM4.49291 5.49093C4.59164 5.49093 4.68816 5.46165 4.77025 5.4068C4.85235 5.35194 4.91633 5.27398 4.95411 5.18276C4.9919 5.09154 5.00178 4.99117 4.98252 4.89433C4.96326 4.79749 4.91572 4.70854 4.8459 4.63873C4.77608 4.56891 4.68713 4.52136 4.5903 4.5021C4.49346 4.48284 4.39308 4.49273 4.30187 4.53051C4.21065 4.56829 4.13268 4.63228 4.07783 4.71437C4.02297 4.79647 3.9937 4.89299 3.9937 4.99172C3.9937 5.12412 4.04629 5.25109 4.13991 5.34471C4.23353 5.43833 4.36051 5.49093 4.49291 5.49093ZM7.48816 4.49251C7.38943 4.49251 7.29291 4.52179 7.21081 4.57664C7.12872 4.6315 7.06473 4.70946 7.02695 4.80068C6.98917 4.8919 6.97928 4.99227 6.99854 5.08911C7.01781 5.18595 7.06535 5.2749 7.13517 5.34471C7.20498 5.41453 7.29393 5.46207 7.39077 5.48134C7.48761 5.5006 7.58798 5.49071 7.6792 5.45293C7.77042 5.41514 7.84838 5.35116 7.90324 5.26907C7.95809 5.18697 7.98737 5.09045 7.98737 4.99172C7.98737 4.85932 7.93477 4.73235 7.84115 4.63873C7.74753 4.54511 7.62056 4.49251 7.48816 4.49251ZM5.99053 0.998047C5.00319 0.998047 4.03802 1.29083 3.21708 1.83937C2.39613 2.3879 1.75628 3.16756 1.37844 4.07975C1.0006 4.99193 0.901743 5.99568 1.09436 6.96405C1.28698 7.93242 1.76244 8.82192 2.46059 9.52008C3.15875 10.2182 4.04825 10.6937 5.01662 10.8863C5.985 11.0789 6.98874 10.9801 7.90092 10.6022C8.81311 10.2244 9.59277 9.58454 10.1413 8.76359C10.6898 7.94265 10.9826 6.97748 10.9826 5.99014C10.9826 5.33457 10.8535 4.68542 10.6026 4.07975C10.3517 3.47408 9.98403 2.92375 9.52047 2.4602C9.05692 1.99664 8.50659 1.62892 7.90092 1.37805C7.29526 1.12717 6.6461 0.998047 5.99053 0.998047ZM5.99053 9.98381C5.20066 9.98381 4.42852 9.74959 3.77177 9.31075C3.11501 8.87192 2.60313 8.2482 2.30086 7.51845C1.99859 6.7887 1.9195 5.98571 2.0736 5.21101C2.22769 4.43631 2.60805 3.72471 3.16658 3.16618C3.7251 2.60766 4.43671 2.2273 5.21141 2.0732C5.9861 1.91911 6.7891 1.99819 7.51885 2.30047C8.24859 2.60274 8.87232 3.11462 9.31115 3.77137C9.74998 4.42813 9.98421 5.20026 9.98421 5.99014C9.98421 7.04933 9.56345 8.06513 8.81449 8.81409C8.06553 9.56305 7.04972 9.98381 5.99053 9.98381Z" fill="#00B1BB"/>
        </svg>
        <span>${this.reactions} reacciones</span>
        </div>

        </div>

        <button class="post-button">Ver publicaci√≥n</button>
    </div>
    `
    }

}

customElements.define('last-post', LastPost)